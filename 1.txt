skinparam classAttributeIconSize 0
skinparam linetype ortho
package "entities"  {
  
  class Student {
    - studentID: String
    - name: String
    - email: String
    - passwordHash: String
    - role: String
    - registrationDate: Date
    
    + getStudentID(): String
    + getName(): String
    + getEmail(): String
    + setName(name: String): void
    + setEmail(email: String): void
  }

  class Admin {
    - adminID: String
    - name: String
    - email: String
    - passwordHash: String
    - role: String
    - permissions: List<String>
    
    + getAdminID(): String
    + getName(): String
    + getEmail(): String
    + getPermissions(): List<String>
  }
  
}
package "controller"  {
  interface IController {
    + handleAccommodationRequest(studentID: String, accommodationID: String): void
    + handleTransportRequest(studentID: String, transportID: String): void
    + handleMealRequest(studentID: String, mealType: String): void
    + handleClubRequest(studentID: String, clubID: String): void
    + sendStudentNotification(studentID: String, message: String, type: String): void
  }

  class Controller implements IController {
    - notificationService: INotificationService
    - accommodationService: IAccommodationService
    - transportService: ITransportService
    - mealService: IMealService
    - clubService: IClubService
    - authorizationService: IAuthorizationService

    + handleAccommodationRequest(studentID: String, accommodationID: String): void
    + handleTransportRequest(studentID: String, transportID: String): void
    + handleMealRequest(studentID: String, mealType: String): void
    + handleClubRequest(studentID: String, clubID: String): void
    + sendStudentNotification(studentID: String, message: String, type: String): void
  }

}

package "services"  {
  interface IAuthenticationService {
    + authenticate(email: String, password: String): AuthToken
    + register(userData: RegisterDTO): User
    + validateToken(token: String): boolean
    + logout(token: String): void
    + changePassword(userID: String, oldPassword: String, newPassword: String): boolean
    + resetPassword(email: String): void
  }
  class AuthenticationService implements IAuthenticationService {
    - userRepository: IRepository
    - passwordHasher: IPasswordHasher
    - tokenManager: ITokenManager
    
    + authenticate(email: String, password: String): AuthToken
    + register(userData: RegisterDTO): User
    + validateToken(token: String): boolean
    + logout(token: String): void
    + changePassword(userID: String, oldPassword: String, newPassword: String): boolean
    + resetPassword(email: String): void
  }
  interface IPaymentService {
      + processTransaction(amount: double, type: String): boolean
  }

  interface INotificationService {
    + sendNotification(recipientID: String, message: String, type: String): void
    + viewNotifications(userID: String): List<String>
  }
  interface IAccommodationService {
    + bookHousing(studentID: String, accommodationID: String): void
    + cancelBooking(studentID: String, bookingID: String): void
  }

  interface ITransportService {
    + bookTransport(studentID: String, transportID: String): void
    + cancelBooking(studentID: String, bookingID: String): void
  }

  interface IMealService {
    + selectMeal(studentID: String, mealType: String): void
    + cancelMeal(studentID: String, mealID: String): void
  }

  interface IClubService {
    + chooseClub(studentID: String, clubID: String): void
    + cancelClubMembership(studentID: String, clubID: String): void
  }
  class PaymentService implements IPaymentService {
      - repo: IRepository
      - processor: IPaymentProcessor
      + processTransaction(amount: double, type: String): boolean
  }

  class NotificationService implements INotificationService {
    - repository: IRepository
    - notificationFactory: INotificationFactory
    + sendNotification(recipientID: String, message: String, type: String): void
    + viewNotifications(userID: String): List<String>
  }

  class AccommodationService implements IAccommodationService {
    - repository: IRepository
    - paymentService: IPaymentService
    - authorizationService: IAuthorizationService
    + bookHousing(studentID: String, accommodationID: String): void
    + cancelBooking(studentID: String, bookingID: String): void
  }

  class TransportService implements ITransportService {
    - repository: IRepository
    - paymentService: IPaymentService
    - authorizationService: IAuthorizationService
    + bookTransport(studentID: String, transportID: String): void
    + cancelBooking(studentID: String, bookingID: String): void
  }

  class MealService implements IMealService {
    - repository: IRepository
    - mealDirector: MealDirector
    - paymentService: IPaymentService
    - authorizationService: IAuthorizationService
    + selectMeal(studentID: String, mealType: String): void
    + cancelMeal(studentID: String, mealID: String): void
  }

  class ClubService implements IClubService {
    - repository: IRepository
    - paymentService: IPaymentService
    - authorizationService: IAuthorizationService
    + chooseClub(studentID: String, clubID: String): void
    + cancelClubMembership(studentID: String, clubID: String): void
  }
} 
class MealDirector  

Student --> IController
Admin --> IController 
Controller --> IAuthenticationService
Controller --> INotificationService : delegates to
Controller --> IAccommodationService : delegates to
Controller --> ITransportService : delegates to
Controller --> IMealService : delegates to
Controller --> IClubService : delegates to

AccommodationService --> IPaymentService : uses for payments
TransportService --> IPaymentService : uses for payments
MealService --> IPaymentService : uses for payments
ClubService --> IPaymentService : uses for payments



services.NotificationService --> INotificationFactory : uses
services.MealService --> MealDirector : uses
@enduml